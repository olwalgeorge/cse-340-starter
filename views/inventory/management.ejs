<h1><%= title %></h1>
  
  <%# Flash message handling %>
  <%- messages() %>
  
  <div class="inventory-dashboard">
    <!-- Main Dashboard Header with Modern Design -->
    <div class="dashboard-header-modern">
      <div class="header-content">
        <div class="header-icon">
          <svg class="management-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect>
            <line x1="8" y1="21" x2="16" y2="21"></line>
            <line x1="12" y1="17" x2="12" y2="21"></line>
          </svg>
        </div>
        <div class="header-text">
          <h1 class="dashboard-title">Inventory Management System</h1>
          <p class="dashboard-subtitle">Comprehensive vehicle inventory control and analytics platform</p>
        </div>
      </div>
      <div class="header-stats">
        <div class="stat-item">
          <span class="stat-number">42</span>
          <span class="stat-label">Vehicles</span>
        </div>
        <div class="stat-item">
          <span class="stat-number">8</span>
          <span class="stat-label">Categories</span>
        </div>
      </div>
    </div>

    <!-- Primary Actions Row - Hero Cards -->
    <div class="hero-cards-section">
      <div class="section-title">
        <h2>Quick Actions</h2>
        <p>Most commonly used inventory management tasks</p>
      </div>
      <div class="hero-cards-grid">
        <div class="hero-card primary-card">
          <div class="card-gradient-bg"></div>
          <div class="card-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M12 5l7 7-7 7M5 12h14"></path>
            </svg>
          </div>
          <div class="card-content">
            <h3>üè∑Ô∏è Vehicle Classifications</h3>
            <p>Organize your inventory with custom vehicle categories and classification types for better management.</p>
            <div class="card-features">
              <span class="feature">‚úì Category Management</span>
              <span class="feature">‚úì Type Organization</span>
            </div>
          </div>
          <div class="card-actions">
            <a href="/inv/add-classification" class="btn-primary-card">Add Classification</a>
          </div>
        </div>

        <div class="hero-card secondary-card">
          <div class="card-gradient-bg"></div>
          <div class="card-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
              <circle cx="12" cy="10" r="3"></circle>
            </svg>
          </div>
          <div class="card-content">
            <h3>üöó Add New Vehicle</h3>
            <p>Expand your inventory with new vehicles featuring detailed specifications, pricing, and high-quality images.</p>
            <div class="card-features">
              <span class="feature">‚úì Detailed Specs</span>
              <span class="feature">‚úì Image Gallery</span>
            </div>
          </div>
          <div class="card-actions">
            <a href="/inv/add-inventory" class="btn-primary-card">Add Vehicle</a>
          </div>
        </div>
      </div>
    </div>

    <!-- Secondary Functions Grid -->
    <div class="management-section">
      <div class="section-title">
        <h2>Management & Analytics</h2>
        <p>Advanced tools for inventory control and business insights</p>
      </div>
      <div class="management-grid">
        <div class="management-card edit-card">
          <div class="card-header-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
              <path d="m18.5 2.5 3 3L12 15l-4 1 1-4z"></path>
            </svg>
          </div>
          <div class="card-content">
            <h3>‚úèÔ∏è Modify Inventory</h3>
            <p>Edit or remove vehicles from your inventory with advanced filtering and bulk operations.</p>
            <div class="dropdown-section">
              <label for="classificationList" class="dropdown-label">Filter by Classification:</label>
              <%- classificationList %>
              <div class="inventory-table-container">
                <table id="inventoryDisplay" class="modern-table"></table>
              </div>
            </div>
          </div>
        </div>

        <div class="management-card analytics-card">
          <div class="card-header-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <line x1="18" y1="20" x2="18" y2="10"></line>
              <line x1="12" y1="20" x2="12" y2="4"></line>
              <line x1="6" y1="20" x2="6" y2="14"></line>
            </svg>
          </div>
          <div class="card-content">
            <h3>üìä Analytics Dashboard</h3>
            <p>Comprehensive business intelligence with sales analytics, inventory trends, and performance metrics.</p>
            <div class="analytics-preview">
              <div class="metric">
                <span class="metric-value">$127K</span>
                <span class="metric-label">Total Value</span>
              </div>
              <div class="metric">
                <span class="metric-value">15%</span>
                <span class="metric-label">Growth</span>
              </div>
            </div>
          </div>
          <div class="card-actions">
            <a href="/inv/report" class="btn-analytics">View Full Reports</a>
          </div>
        </div>

        <div class="management-card tools-card">
          <div class="card-header-icon">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
              <path d="M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z"></path>
            </svg>
          </div>
          <div class="card-content">
            <h3>‚öôÔ∏è Advanced Tools</h3>
            <p>Powerful utilities for data management, bulk operations, import/export, and system configuration.</p>
            <div class="tools-list">
              <span class="tool-item">üì§ Bulk Import</span>
              <span class="tool-item">üìä Data Export</span>
              <span class="tool-item">üîß System Config</span>
            </div>
          </div>
          <div class="card-actions">
            <a href="/inv/tools" class="btn-tools">Access Tools</a>
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
'use strict'

// Get a list of items in inventory based on the classification_id 
let classificationList = document.querySelector("#classificationList")
classificationList.addEventListener("change", function () { 
 let classification_id = classificationList.value 
 console.log(`classification_id is: ${classification_id}`) 
 let classIdURL = "/inv/getInventory/"+classification_id 
 fetch(classIdURL) 
 .then(function (response) { 
  if (response.ok) { 
   return response.json(); 
  } 
  throw Error("Network response was not OK"); 
 }) 
 .then(function (data) { 
  console.log(data); 
  buildInventoryList(data); 
 }) 
 .catch(function (error) { 
  console.log('There was a problem: ', error.message) 
 }) 
})

// Build inventory items into HTML table components and inject into DOM 
function buildInventoryList(data) { 
 let inventoryDisplay = document.getElementById("inventoryDisplay"); 
 // Set up the table labels 
 let dataTable = '<thead>'; 
 dataTable += '<tr><th>Vehicle Name</th><th>Edit</th><th>Delete</th></tr>'; 
 dataTable += '</thead>'; 
 // Set up the table body 
 dataTable += '<tbody>'; 
 // Iterate over all vehicles in the array and put each in a row 
 data.forEach(function (element) { 
  console.log(element.inv_id + ", " + element.inv_model); 
  dataTable += `<tr><td>${element.inv_make} ${element.inv_model}</td>`; 
  dataTable += `<td><a href='/inv/edit/${element.inv_id}' title='Click to edit'>‚úèÔ∏è Edit</a></td>`; 
  dataTable += `<td><a href='/inv/delete/${element.inv_id}' title='Click to delete'>üóëÔ∏è Delete</a></td></tr>`; 
 }) 
 dataTable += '</tbody>'; 
 // Display the contents in the Inventory Management view 
 inventoryDisplay.innerHTML = dataTable; 
}
</script>
